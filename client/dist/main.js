(()=>{"use strict";function e(e){this.name=e,this.status="ready"}function n(e,n){this.name=e,this.time=n}function t(e,n){this.name=e,this.servtime=n,this.status="ready"}e.prototype.isAvailable=function(){return"ready"===this.status},e.prototype.cookAsync=function(e){var n=this;return n.status="cooking",new Promise((function(t){setTimeout((function(){n.status="ready",t()}),e.time)}))},t.prototype.isAvailable=function(){return"ready"===this.status},t.prototype.servAsync=function(){var e=this;return new Promise((function(n){e.status="serving",setTimeout((function(){e.status="ready",n()}),e.servtime)}))};var r=[],u=[],i=[],o=0,s=[new e("유림"),new e("진하")],c=[new t("현철",1e3),new t("일현",2e3)];function a(e,n,t){var r=document.getElementById(n);r.innerHTML="",e.forEach((function(e){var n=document.createElement("li");n.textContent=t(e),r.append(n)}))}function m(){a(r,"orders",(function(e){return"Order "+e.orderNumber+": "+e.menu.name}))}function f(){a(u,"cookings",(function(e){return`${e.menu.orderNumber} 메뉴: (${e.menu.menu.name}) (${e.menu.menu.time/1e3}초) -요리사: ${e.chef.name} (${e.chef.status})`}))}function d(){a(i,"servings",(function(e){return`${e.menu.orderNumber} 메뉴: (${e.menu.menu.name}) (${e.menu.menu.time/1e3}초) -서버: ${e.server.name} (${e.server.status})`}))}function l(e){var n={orderNumber:o++,menu:e};r.push(n),m(),new Promise((function(e){var n,t=setInterval((function(){(n=s.find((function(e){return e.isAvailable()})))&&(clearInterval(t),e(n))}),100)})).then((function(t){console.log(t),u.push({menu:n,chef:t}),f();var i=r.findIndex((function(e){return e.orderNumber===n.orderNumber}));return-1!==i&&(r.splice(i,1),m()),t.cookAsync(e)})).then((function(){return new Promise((function(e){var n,t=setInterval((function(){(n=c.find((function(e){return e.isAvailable()})))&&(clearInterval(t),e(n))}),100)}))})).then((function(e){var t=u.findIndex((function(e){return e.menu.orderNumber===n.orderNumber}));return u.splice(t,1),f(),i.push({menu:n,server:e}),d(),e.servAsync(e)})).then((function(){var e=i.findIndex((function(e){return e.menu.orderNumber===n.orderNumber}));i.splice(e,1),d()})).catch((function(e){console.log(e)}))}document.getElementById("sundae").onclick=function(){l(new n("순댓국",1e3))},document.getElementById("haejang").onclick=function(){l(new n("해장국",2e3))}})();